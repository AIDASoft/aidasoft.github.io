\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence}{
\section{DD4hep::Simulation::Geant4StackingActionSequence Class Reference}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence}\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
}


Concrete implementation of the Geant4 stacking action sequence.  


{\ttfamily \#include $<$Geant4StackingAction.h$>$}Inheritance diagram for DD4hep::Simulation::Geant4StackingActionSequence::\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a1ddc69cd00ed31d6da76929243f43c84}{Geant4StackingActionSequence} (\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_context}{Geant4Context} $\ast$ctxt, const std::string \&name)
\begin{DoxyCompactList}\small\item\em Standard constructor. \item\end{DoxyCompactList}\item 
virtual \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_af4cadf550f682910d7eee326802859d8}{$\sim$Geant4StackingActionSequence} ()
\begin{DoxyCompactList}\small\item\em Default destructor. \item\end{DoxyCompactList}\item 
virtual void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a093447274a6d135bc1d69fe96ed0961c}{updateContext} (\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_context}{Geant4Context} $\ast$ctxt)
\begin{DoxyCompactList}\small\item\em Set or update client context. \item\end{DoxyCompactList}\item 
virtual void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_af292bcae909cc6b7bc4a94c0f0e07b9c}{configureFiber} (\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_context}{Geant4Context} $\ast$thread\_\-context)
\begin{DoxyCompactList}\small\item\em Set or update client for the use in a new thread fiber. \item\end{DoxyCompactList}\item 
\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action}{Geant4StackingAction} $\ast$ \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a1f5acccf1180d7c6a6ff9c919bd96384}{get} (const std::string \&name) const 
\begin{DoxyCompactList}\small\item\em Get an action by name. \item\end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a653b407655119e1d390d1297da1100c2}{callAtNewStage} (\hyperlink{class_t}{T} $\ast$p, void(T::$\ast$f)())
\begin{DoxyCompactList}\small\item\em Register begin-\/of-\/event callback. Types Q and \hyperlink{class_t}{T} must be polymorph! \item\end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_ab8f7094741075bb59ba07ef0c33d1c6c}{callAtPrepare} (\hyperlink{class_t}{T} $\ast$p, void(T::$\ast$f)())
\begin{DoxyCompactList}\small\item\em Register end-\/of-\/event callback. Types Q and \hyperlink{class_t}{T} must be polymorph! \item\end{DoxyCompactList}\item 
void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a19b6f7d514d79b40c490226a361d55b4}{adopt} (\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action}{Geant4StackingAction} $\ast$action)
\begin{DoxyCompactList}\small\item\em Add an actor responding to all callbacks. Sequence takes ownership. \item\end{DoxyCompactList}\item 
virtual void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a8077fe558cebbeeef5af0114abab6a55}{newStage} ()
\begin{DoxyCompactList}\small\item\em New-\/stage callback. \item\end{DoxyCompactList}\item 
virtual void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a77ab67508d46a2af265090b04d5a41cb}{prepare} ()
\begin{DoxyCompactList}\small\item\em Preparation callback. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{struct_d_d4hep_1_1_callback_sequence}{CallbackSequence} \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a9a67c9ae5d00befcdfaa81dfcac6dfb1}{m\_\-newStage}
\begin{DoxyCompactList}\small\item\em \hyperlink{class_d_d4hep_1_1_callback}{Callback} sequence for the newStage call. \item\end{DoxyCompactList}\item 
\hyperlink{struct_d_d4hep_1_1_callback_sequence}{CallbackSequence} \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a5e1405fee094690bb84d74c38b619bbc}{m\_\-prepare}
\item 
Actors$<$ \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action}{Geant4StackingAction} $>$ \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_af1288d59daee21aca2f409b9dc629a04}{m\_\-actors}
\begin{DoxyCompactList}\small\item\em The list of action objects to be called. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Concrete implementation of the Geant4 stacking action sequence. The sequence dispatches the callbacks for each stepping action to all registered \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action}{Geant4StackingAction} members and all registered callbacks.

Note Multi-\/Threading issue: Neither callbacks not the action list is protected against multiple threads calling the Geant4 callbacks! These must be protected in the user actions themselves.

\begin{DoxyAuthor}{Author}
M.Frank 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.0 
\end{DoxyVersion}


Definition at line 100 of file Geant4StackingAction.h.

\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a1ddc69cd00ed31d6da76929243f43c84}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!Geant4StackingActionSequence@{Geant4StackingActionSequence}}
\index{Geant4StackingActionSequence@{Geant4StackingActionSequence}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{Geant4StackingActionSequence}]{\setlength{\rightskip}{0pt plus 5cm}DD4hep::Simulation::Geant4StackingActionSequence::Geant4StackingActionSequence ({\bf Geant4Context} $\ast$ {\em ctxt}, \/  const std::string \& {\em name})}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a1ddc69cd00ed31d6da76929243f43c84}


Standard constructor. \hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_af4cadf550f682910d7eee326802859d8}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!$\sim$Geant4StackingActionSequence@{$\sim$Geant4StackingActionSequence}}
\index{$\sim$Geant4StackingActionSequence@{$\sim$Geant4StackingActionSequence}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{$\sim$Geant4StackingActionSequence}]{\setlength{\rightskip}{0pt plus 5cm}Geant4StackingActionSequence::$\sim$Geant4StackingActionSequence ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_af4cadf550f682910d7eee326802859d8}


Default destructor. 

Definition at line 99 of file Geant4StackingAction.cpp.

References DD4hep::CallbackSequence::clear(), DD4hep::InstanceCount::decrement(), m\_\-actors, m\_\-newStage, m\_\-prepare, and DD4hep::Simulation::Geant4Action::release().

\subsection{Member Function Documentation}
\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a19b6f7d514d79b40c490226a361d55b4}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!adopt@{adopt}}
\index{adopt@{adopt}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{adopt}]{\setlength{\rightskip}{0pt plus 5cm}void Geant4StackingActionSequence::adopt ({\bf Geant4StackingAction} $\ast$ {\em action})}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a19b6f7d514d79b40c490226a361d55b4}


Add an actor responding to all callbacks. Sequence takes ownership. 

Definition at line 108 of file Geant4StackingAction.cpp.

References DD4hep::Simulation::Geant4Action::addRef(), and m\_\-actors.

Referenced by DD4hep::Converter$<$ T, ARG $>$::operator()().\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a653b407655119e1d390d1297da1100c2}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!callAtNewStage@{callAtNewStage}}
\index{callAtNewStage@{callAtNewStage}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{callAtNewStage}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ void DD4hep::Simulation::Geant4StackingActionSequence::callAtNewStage ({\bf T} $\ast$ {\em p}, \/  void(T::$\ast$)() {\em f})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a653b407655119e1d390d1297da1100c2}


Register begin-\/of-\/event callback. Types Q and \hyperlink{class_t}{T} must be polymorph! 

Definition at line 120 of file Geant4StackingAction.h.

References DD4hep::CallbackSequence::add(), and m\_\-newStage.

Referenced by DD4hep::Converter$<$ T, ARG $>$::operator()().\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_ab8f7094741075bb59ba07ef0c33d1c6c}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!callAtPrepare@{callAtPrepare}}
\index{callAtPrepare@{callAtPrepare}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{callAtPrepare}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ void DD4hep::Simulation::Geant4StackingActionSequence::callAtPrepare ({\bf T} $\ast$ {\em p}, \/  void(T::$\ast$)() {\em f})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_ab8f7094741075bb59ba07ef0c33d1c6c}


Register end-\/of-\/event callback. Types Q and \hyperlink{class_t}{T} must be polymorph! 

Definition at line 124 of file Geant4StackingAction.h.

References DD4hep::CallbackSequence::add(), and m\_\-prepare.

Referenced by DD4hep::Converter$<$ T, ARG $>$::operator()().\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_af292bcae909cc6b7bc4a94c0f0e07b9c}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!configureFiber@{configureFiber}}
\index{configureFiber@{configureFiber}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{configureFiber}]{\setlength{\rightskip}{0pt plus 5cm}void Geant4StackingActionSequence::configureFiber ({\bf Geant4Context} $\ast$ {\em thread\_\-context})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_af292bcae909cc6b7bc4a94c0f0e07b9c}


Set or update client for the use in a new thread fiber. 

Reimplemented from \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_action_a6adc7138508303e4e417cb48a737ab19}{DD4hep::Simulation::Geant4Action}.

Definition at line 124 of file Geant4StackingAction.cpp.

References DD4hep::Simulation::Geant4Action::configureFiber(), and m\_\-actors.\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a1f5acccf1180d7c6a6ff9c919bd96384}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!get@{get}}
\index{get@{get}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{get}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Geant4StackingAction}$\ast$ DD4hep::Simulation::Geant4StackingActionSequence::get (const std::string \& {\em name}) const}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a1f5acccf1180d7c6a6ff9c919bd96384}


Get an action by name. \hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a8077fe558cebbeeef5af0114abab6a55}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!newStage@{newStage}}
\index{newStage@{newStage}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{newStage}]{\setlength{\rightskip}{0pt plus 5cm}void Geant4StackingActionSequence::newStage ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a8077fe558cebbeeef5af0114abab6a55}


New-\/stage callback. Pre-\/track action callback. 

Definition at line 134 of file Geant4StackingAction.cpp.

References m\_\-actors, m\_\-newStage, and DD4hep::Simulation::Geant4StackingAction::newStage().

Referenced by DD4hep::Simulation::Geant4UserStackingAction::NewStage().\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a77ab67508d46a2af265090b04d5a41cb}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!prepare@{prepare}}
\index{prepare@{prepare}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{prepare}]{\setlength{\rightskip}{0pt plus 5cm}void Geant4StackingActionSequence::prepare ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a77ab67508d46a2af265090b04d5a41cb}


Preparation callback. Post-\/track action callback. 

Definition at line 140 of file Geant4StackingAction.cpp.

References m\_\-actors, m\_\-prepare, and DD4hep::Simulation::Geant4StackingAction::prepare().

Referenced by DD4hep::Simulation::Geant4UserStackingAction::PrepareNewEvent().\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a093447274a6d135bc1d69fe96ed0961c}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!updateContext@{updateContext}}
\index{updateContext@{updateContext}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{updateContext}]{\setlength{\rightskip}{0pt plus 5cm}void Geant4StackingActionSequence::updateContext ({\bf Geant4Context} $\ast$ {\em ctxt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a093447274a6d135bc1d69fe96ed0961c}


Set or update client context. 

Reimplemented from \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_action_ae3b9daf2af881df956c46568c0743313}{DD4hep::Simulation::Geant4Action}.

Definition at line 118 of file Geant4StackingAction.cpp.

References m\_\-actors, and DD4hep::Simulation::Geant4Action::m\_\-context.

\subsection{Member Data Documentation}
\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_af1288d59daee21aca2f409b9dc629a04}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!m\_\-actors@{m\_\-actors}}
\index{m\_\-actors@{m\_\-actors}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{m\_\-actors}]{\setlength{\rightskip}{0pt plus 5cm}Actors$<${\bf Geant4StackingAction}$>$ {\bf DD4hep::Simulation::Geant4StackingActionSequence::m\_\-actors}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_af1288d59daee21aca2f409b9dc629a04}


The list of action objects to be called. 

Definition at line 107 of file Geant4StackingAction.h.

Referenced by adopt(), configureFiber(), newStage(), prepare(), updateContext(), and $\sim$Geant4StackingActionSequence().\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a9a67c9ae5d00befcdfaa81dfcac6dfb1}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!m\_\-newStage@{m\_\-newStage}}
\index{m\_\-newStage@{m\_\-newStage}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{m\_\-newStage}]{\setlength{\rightskip}{0pt plus 5cm}{\bf CallbackSequence} {\bf DD4hep::Simulation::Geant4StackingActionSequence::m\_\-newStage}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a9a67c9ae5d00befcdfaa81dfcac6dfb1}


\hyperlink{class_d_d4hep_1_1_callback}{Callback} sequence for the newStage call. 

Definition at line 103 of file Geant4StackingAction.h.

Referenced by callAtNewStage(), newStage(), and $\sim$Geant4StackingActionSequence().\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a5e1405fee094690bb84d74c38b619bbc}{
\index{DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}!m\_\-prepare@{m\_\-prepare}}
\index{m\_\-prepare@{m\_\-prepare}!DD4hep::Simulation::Geant4StackingActionSequence@{DD4hep::Simulation::Geant4StackingActionSequence}}
\subsubsection[{m\_\-prepare}]{\setlength{\rightskip}{0pt plus 5cm}{\bf CallbackSequence} {\bf DD4hep::Simulation::Geant4StackingActionSequence::m\_\-prepare}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_stacking_action_sequence_a5e1405fee094690bb84d74c38b619bbc}


Definition at line 105 of file Geant4StackingAction.h.

Referenced by callAtPrepare(), prepare(), and $\sim$Geant4StackingActionSequence().

The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
/afs/cern.ch/user/m/mpetric/nightly\_\-cppcheck/dd4hep/DDG4/include/DDG4/\hyperlink{_geant4_stacking_action_8h}{Geant4StackingAction.h}\item 
/afs/cern.ch/user/m/mpetric/nightly\_\-cppcheck/dd4hep/DDG4/src/\hyperlink{_geant4_stacking_action_8cpp}{Geant4StackingAction.cpp}\end{DoxyCompactItemize}
