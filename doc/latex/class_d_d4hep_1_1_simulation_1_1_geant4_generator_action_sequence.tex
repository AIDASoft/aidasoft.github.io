\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence}{
\section{DD4hep::Simulation::Geant4GeneratorActionSequence Class Reference}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence}\index{DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}}
}


Concrete implementation of the Geant4 generator action sequence.  


{\ttfamily \#include $<$Geant4GeneratorAction.h$>$}Inheritance diagram for DD4hep::Simulation::Geant4GeneratorActionSequence::\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2cm]{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a6faeaf2816abecfd4fa39eef4d6cda9c}{Geant4GeneratorActionSequence} (\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_context}{Geant4Context} $\ast$context, const std::string \&name)
\begin{DoxyCompactList}\small\item\em Standard constructor. \item\end{DoxyCompactList}\item 
virtual \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a69d6b2986aeafa1e9951700f4d023455}{$\sim$Geant4GeneratorActionSequence} ()
\begin{DoxyCompactList}\small\item\em Default destructor. \item\end{DoxyCompactList}\item 
virtual void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a52b0d18dd3c29e1b1e133d9e1c73284b}{updateContext} (\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_context}{Geant4Context} $\ast$ctxt)
\begin{DoxyCompactList}\small\item\em Set or update client context. \item\end{DoxyCompactList}\item 
virtual void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a0ba4324a4f977eb12057e789eaf44f07}{configureFiber} (\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_context}{Geant4Context} $\ast$thread\_\-context)
\begin{DoxyCompactList}\small\item\em Set or update client for the use in a new thread fiber. \item\end{DoxyCompactList}\item 
\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action}{Geant4GeneratorAction} $\ast$ \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_adfb5656b40eeb07f148871e97a7d11f7}{get} (const std::string \&name) const 
\begin{DoxyCompactList}\small\item\em Get an action by name. \item\end{DoxyCompactList}\item 
{\footnotesize template$<$typename Q , typename T $>$ }\\void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a05f04216668a2736d720cf9a8a3e012c}{call} (Q $\ast$p, void(T::$\ast$f)(G4Event $\ast$))
\begin{DoxyCompactList}\small\item\em Register primary particle generation callback. Types Q and \hyperlink{class_t}{T} must be polymorph! \item\end{DoxyCompactList}\item 
void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_ac6d847bdeeaa2b6bd46f1ae89fc15277}{adopt} (\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action}{Geant4GeneratorAction} $\ast$action)
\begin{DoxyCompactList}\small\item\em Add an actor responding to all callbacks. Sequence takes ownership. \item\end{DoxyCompactList}\item 
virtual void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a60e6a124a4d378fbf6a980137f5290cf}{operator()} (G4Event $\ast$event)
\begin{DoxyCompactList}\small\item\em \hyperlink{class_d_d4hep_1_1_callback}{Callback} to generate primary particles. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{struct_d_d4hep_1_1_callback_sequence}{CallbackSequence} \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a3861258f355c58bb19602e7d099c1c9e}{m\_\-calls}
\begin{DoxyCompactList}\small\item\em \hyperlink{class_d_d4hep_1_1_callback}{Callback} sequence to generate primary particles. \item\end{DoxyCompactList}\item 
\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_action_1_1_actors}{Actors}$<$ \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action}{Geant4GeneratorAction} $>$ \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a89614165b2d4cf32bbed637abca203d1}{m\_\-actors}
\begin{DoxyCompactList}\small\item\em The list of action objects to be called. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Concrete implementation of the Geant4 generator action sequence. The sequence dispatches the callbacks at the beginning of an event to all registered \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action}{Geant4GeneratorAction} members and all registered callbacks.

The callback signature is: void \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a60e6a124a4d378fbf6a980137f5290cf}{operator()(G4Event$\ast$ event)}

Note Multi-\/Threading issue: Neither callbacks not the action list is protected against multiple threads calling the Geant4 callbacks! These must be protected in the user actions themselves.

\begin{DoxyAuthor}{Author}
M.Frank 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.0 
\end{DoxyVersion}


Definition at line 110 of file Geant4GeneratorAction.h.

\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a6faeaf2816abecfd4fa39eef4d6cda9c}{
\index{DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}!Geant4GeneratorActionSequence@{Geant4GeneratorActionSequence}}
\index{Geant4GeneratorActionSequence@{Geant4GeneratorActionSequence}!DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}}
\subsubsection[{Geant4GeneratorActionSequence}]{\setlength{\rightskip}{0pt plus 5cm}DD4hep::Simulation::Geant4GeneratorActionSequence::Geant4GeneratorActionSequence ({\bf Geant4Context} $\ast$ {\em context}, \/  const std::string \& {\em name})}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a6faeaf2816abecfd4fa39eef4d6cda9c}


Standard constructor. \hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a69d6b2986aeafa1e9951700f4d023455}{
\index{DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}!$\sim$Geant4GeneratorActionSequence@{$\sim$Geant4GeneratorActionSequence}}
\index{$\sim$Geant4GeneratorActionSequence@{$\sim$Geant4GeneratorActionSequence}!DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}}
\subsubsection[{$\sim$Geant4GeneratorActionSequence}]{\setlength{\rightskip}{0pt plus 5cm}Geant4GeneratorActionSequence::$\sim$Geant4GeneratorActionSequence ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a69d6b2986aeafa1e9951700f4d023455}


Default destructor. 

Definition at line 88 of file Geant4GeneratorAction.cpp.

References DD4hep::CallbackSequence::clear(), DD4hep::InstanceCount::decrement(), m\_\-actors, m\_\-calls, and DD4hep::Simulation::Geant4Action::release().

\subsection{Member Function Documentation}
\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_ac6d847bdeeaa2b6bd46f1ae89fc15277}{
\index{DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}!adopt@{adopt}}
\index{adopt@{adopt}!DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}}
\subsubsection[{adopt}]{\setlength{\rightskip}{0pt plus 5cm}void Geant4GeneratorActionSequence::adopt ({\bf Geant4GeneratorAction} $\ast$ {\em action})}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_ac6d847bdeeaa2b6bd46f1ae89fc15277}


Add an actor responding to all callbacks. Sequence takes ownership. 

Definition at line 112 of file Geant4GeneratorAction.cpp.

References DD4hep::Simulation::Geant4Action::addRef(), and m\_\-actors.

Referenced by DD4hep::Converter$<$ T, ARG $>$::operator()().\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a05f04216668a2736d720cf9a8a3e012c}{
\index{DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}!call@{call}}
\index{call@{call}!DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}}
\subsubsection[{call}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename Q , typename T $>$ void DD4hep::Simulation::Geant4GeneratorActionSequence::call (Q $\ast$ {\em p}, \/  void(T::$\ast$)(G4Event $\ast$) {\em f})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a05f04216668a2736d720cf9a8a3e012c}


Register primary particle generation callback. Types Q and \hyperlink{class_t}{T} must be polymorph! 

Definition at line 129 of file Geant4GeneratorAction.h.

References DD4hep::CallbackSequence::add(), and m\_\-calls.

Referenced by DD4hep::Converter$<$ T, ARG $>$::operator()().\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a0ba4324a4f977eb12057e789eaf44f07}{
\index{DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}!configureFiber@{configureFiber}}
\index{configureFiber@{configureFiber}!DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}}
\subsubsection[{configureFiber}]{\setlength{\rightskip}{0pt plus 5cm}void Geant4GeneratorActionSequence::configureFiber ({\bf Geant4Context} $\ast$ {\em thread\_\-context})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a0ba4324a4f977eb12057e789eaf44f07}


Set or update client for the use in a new thread fiber. 

Reimplemented from \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_action_a6adc7138508303e4e417cb48a737ab19}{DD4hep::Simulation::Geant4Action}.

Definition at line 102 of file Geant4GeneratorAction.cpp.

References DD4hep::Simulation::Geant4Action::configureFiber(), and m\_\-actors.\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_adfb5656b40eeb07f148871e97a7d11f7}{
\index{DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}!get@{get}}
\index{get@{get}!DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}}
\subsubsection[{get}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Geant4GeneratorAction}$\ast$ DD4hep::Simulation::Geant4GeneratorActionSequence::get (const std::string \& {\em name}) const}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_adfb5656b40eeb07f148871e97a7d11f7}


Get an action by name. \hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a60e6a124a4d378fbf6a980137f5290cf}{
\index{DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}!operator()@{operator()}}
\index{operator()@{operator()}!DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}}
\subsubsection[{operator()}]{\setlength{\rightskip}{0pt plus 5cm}void Geant4GeneratorActionSequence::operator() (G4Event $\ast$ {\em event})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a60e6a124a4d378fbf6a980137f5290cf}


\hyperlink{class_d_d4hep_1_1_callback}{Callback} to generate primary particles. Generator callback. 

Definition at line 123 of file Geant4GeneratorAction.cpp.

References m\_\-actors, and m\_\-calls.\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a52b0d18dd3c29e1b1e133d9e1c73284b}{
\index{DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}!updateContext@{updateContext}}
\index{updateContext@{updateContext}!DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}}
\subsubsection[{updateContext}]{\setlength{\rightskip}{0pt plus 5cm}void Geant4GeneratorActionSequence::updateContext ({\bf Geant4Context} $\ast$ {\em ctxt})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a52b0d18dd3c29e1b1e133d9e1c73284b}


Set or update client context. 

Reimplemented from \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_action_ae3b9daf2af881df956c46568c0743313}{DD4hep::Simulation::Geant4Action}.

Definition at line 96 of file Geant4GeneratorAction.cpp.

References m\_\-actors, and DD4hep::Simulation::Geant4Action::m\_\-context.

\subsection{Member Data Documentation}
\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a89614165b2d4cf32bbed637abca203d1}{
\index{DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}!m\_\-actors@{m\_\-actors}}
\index{m\_\-actors@{m\_\-actors}!DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}}
\subsubsection[{m\_\-actors}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Actors}$<${\bf Geant4GeneratorAction}$>$ {\bf DD4hep::Simulation::Geant4GeneratorActionSequence::m\_\-actors}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a89614165b2d4cf32bbed637abca203d1}


The list of action objects to be called. 

Definition at line 115 of file Geant4GeneratorAction.h.

Referenced by adopt(), configureFiber(), operator()(), updateContext(), and $\sim$Geant4GeneratorActionSequence().\hypertarget{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a3861258f355c58bb19602e7d099c1c9e}{
\index{DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}!m\_\-calls@{m\_\-calls}}
\index{m\_\-calls@{m\_\-calls}!DD4hep::Simulation::Geant4GeneratorActionSequence@{DD4hep::Simulation::Geant4GeneratorActionSequence}}
\subsubsection[{m\_\-calls}]{\setlength{\rightskip}{0pt plus 5cm}{\bf CallbackSequence} {\bf DD4hep::Simulation::Geant4GeneratorActionSequence::m\_\-calls}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{class_d_d4hep_1_1_simulation_1_1_geant4_generator_action_sequence_a3861258f355c58bb19602e7d099c1c9e}


\hyperlink{class_d_d4hep_1_1_callback}{Callback} sequence to generate primary particles. 

Definition at line 113 of file Geant4GeneratorAction.h.

Referenced by call(), operator()(), and $\sim$Geant4GeneratorActionSequence().

The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
/afs/cern.ch/user/m/mpetric/nightly\_\-cppcheck/dd4hep/DDG4/include/DDG4/\hyperlink{_geant4_generator_action_8h}{Geant4GeneratorAction.h}\item 
/afs/cern.ch/user/m/mpetric/nightly\_\-cppcheck/dd4hep/DDG4/src/\hyperlink{_geant4_generator_action_8cpp}{Geant4GeneratorAction.cpp}\end{DoxyCompactItemize}
