\hypertarget{_geant4_input_handling_8cpp}{}\section{/afs/cern.ch/user/m/mpetric/nightly\+\_\+cppcheck/dd4hep/\+D\+D\+G4/src/\+Geant4\+Input\+Handling.cpp File Reference}
\label{_geant4_input_handling_8cpp}\index{/afs/cern.\+ch/user/m/mpetric/nightly\+\_\+cppcheck/dd4hep/\+D\+D\+G4/src/\+Geant4\+Input\+Handling.\+cpp@{/afs/cern.\+ch/user/m/mpetric/nightly\+\_\+cppcheck/dd4hep/\+D\+D\+G4/src/\+Geant4\+Input\+Handling.\+cpp}}
{\ttfamily \#include \char`\"{}D\+D\+G4/\+Geant4\+Input\+Handling.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}D\+D\+G4/\+Geant4\+Primary.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}D\+D\+G4/\+Geant4\+Context.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}D\+D\+G4/\+Geant4\+Action.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}C\+L\+H\+E\+P/\+Units/\+System\+Of\+Units.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}C\+L\+H\+E\+P/\+Units/\+Physical\+Constants.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}G4\+Particle\+Definition.\+hh\char`\"{}}\newline
{\ttfamily \#include \char`\"{}G4\+Event.\+hh\char`\"{}}\newline
{\ttfamily \#include \char`\"{}G4\+Primary\+Vertex.\+hh\char`\"{}}\newline
{\ttfamily \#include \char`\"{}G4\+Primary\+Particle.\+hh\char`\"{}}\newline
{\ttfamily \#include $<$stdexcept$>$}\newline
{\ttfamily \#include $<$cmath$>$}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{_geant4_input_handling_8cpp_aa7866fa5e4e0ee9b034e9dab6599a9cc}{S\+QR}(x)~(x$\ast$x)
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{class_d_d4hep_1_1_reference_bit_mask}{Reference\+Bit\+Mask}$<$ int $>$ \hyperlink{_geant4_input_handling_8cpp_a5230e4e487f6a330d09a89c3eb7ada6b}{Property\+Mask}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{_geant4_input_handling_8cpp_a74be4a0c227aed723e3a3950cf64805b}{collect\+Primaries} (\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_map}{Geant4\+Primary\+Map} $\ast$pm, \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction}{Geant4\+Primary\+Interaction} $\ast$interaction, \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_vertex}{Geant4\+Vertex} $\ast$particle\+\_\+origine, G4\+Primary\+Particle $\ast$gp)
\begin{DoxyCompactList}\small\item\em Helper to recursively build a D\+D\+G4 interaction from an existing G4 interaction (primary vertex) \end{DoxyCompactList}\item 
static void \hyperlink{_geant4_input_handling_8cpp_a962d52ff757d40461a61a6a649181118}{append\+Interaction} (const \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_action}{Geant4\+Action} $\ast$caller, \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction}{Geant4\+Primary\+Interaction} $\ast$output, \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction}{Geant4\+Primary\+Interaction} $\ast$input)
\begin{DoxyCompactList}\small\item\em Append input interaction to global output. \end{DoxyCompactList}\item 
static void \hyperlink{_geant4_input_handling_8cpp_ad72275c53e6d7fd82f2679b3da0793ab}{rebase\+Particles} (\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction_a6787a2c42dc1fd371b274e75dc380e92}{Geant4\+Primary\+Interaction\+::\+Particle\+Map} \&particles, int \&offset)
\item 
static void \hyperlink{_geant4_input_handling_8cpp_a24ec352dd579358abec2e3c008dbf773}{rebase\+Vertices} (\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction_a0016a8298291af16ea8f24a054cb864c}{Geant4\+Primary\+Interaction\+::\+Vertex\+Map} \&vertices, int part\+\_\+offset)
\item 
static G4\+Primary\+Particle $\ast$ \hyperlink{_geant4_input_handling_8cpp_a216fdc8fcc45739e42b9caee841af178}{create\+G4\+Primary} (const \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_particle_handle}{Geant4\+Particle\+Handle} p)
\item 
static vector$<$ pair$<$ \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_particle}{Geant4\+Particle} $\ast$, G4\+Primary\+Particle $\ast$ $>$ $>$ \hyperlink{_geant4_input_handling_8cpp_a156d3c5a7b980bfd1699e4dd464201ef}{get\+Relevant} (set$<$ int $>$ \&visited, map$<$ int, G4\+Primary\+Particle $\ast$$>$ \&prim, \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction_a6787a2c42dc1fd371b274e75dc380e92}{Geant4\+Primary\+Interaction\+::\+Particle\+Map} \&pm, const \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_particle_handle}{Geant4\+Particle\+Handle} p)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{_geant4_input_handling_8cpp_aa7866fa5e4e0ee9b034e9dab6599a9cc}{}\label{_geant4_input_handling_8cpp_aa7866fa5e4e0ee9b034e9dab6599a9cc} 
\index{Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}!S\+QR@{S\+QR}}
\index{S\+QR@{S\+QR}!Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}}
\subsubsection{\texorpdfstring{S\+QR}{SQR}}
{\footnotesize\ttfamily \#define S\+QR(\begin{DoxyParamCaption}\item[{}]{x }\end{DoxyParamCaption})~(x$\ast$x)}



Referenced by D\+D4hep\+::\+Simulation\+::boost\+Interaction().



\subsection{Typedef Documentation}
\hypertarget{_geant4_input_handling_8cpp_a5230e4e487f6a330d09a89c3eb7ada6b}{}\label{_geant4_input_handling_8cpp_a5230e4e487f6a330d09a89c3eb7ada6b} 
\index{Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}!Property\+Mask@{Property\+Mask}}
\index{Property\+Mask@{Property\+Mask}!Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}}
\subsubsection{\texorpdfstring{Property\+Mask}{PropertyMask}}
{\footnotesize\ttfamily typedef \hyperlink{class_d_d4hep_1_1_reference_bit_mask}{Reference\+Bit\+Mask}$<$int$>$ \hyperlink{_geant4_data_dump_8cpp_a2d5b8b62b64496657c7d0034d748ef3f}{Property\+Mask}}



Definition at line 37 of file Geant4\+Input\+Handling.\+cpp.



\subsection{Function Documentation}
\hypertarget{_geant4_input_handling_8cpp_a962d52ff757d40461a61a6a649181118}{}\label{_geant4_input_handling_8cpp_a962d52ff757d40461a61a6a649181118} 
\index{Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}!append\+Interaction@{append\+Interaction}}
\index{append\+Interaction@{append\+Interaction}!Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}}
\subsubsection{\texorpdfstring{append\+Interaction()}{appendInteraction()}}
{\footnotesize\ttfamily static void append\+Interaction (\begin{DoxyParamCaption}\item[{const \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_action}{Geant4\+Action} $\ast$}]{caller,  }\item[{\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction}{Geant4\+Primary\+Interaction} $\ast$}]{output,  }\item[{\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction}{Geant4\+Primary\+Interaction} $\ast$}]{input }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Append input interaction to global output. 



Definition at line 169 of file Geant4\+Input\+Handling.\+cpp.



References D\+D4hep\+::\+Simulation\+::\+Geant4\+Action\+::abort\+Run(), D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::add\+Ref(), D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::id, D\+D4hep\+::\+Simulation\+::\+Geant4\+Primary\+Interaction\+::particles, and D\+D4hep\+::\+Simulation\+::\+Geant4\+Primary\+Interaction\+::vertices.



Referenced by D\+D4hep\+::\+Simulation\+::merge\+Interactions().

\hypertarget{_geant4_input_handling_8cpp_a74be4a0c227aed723e3a3950cf64805b}{}\label{_geant4_input_handling_8cpp_a74be4a0c227aed723e3a3950cf64805b} 
\index{Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}!collect\+Primaries@{collect\+Primaries}}
\index{collect\+Primaries@{collect\+Primaries}!Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}}
\subsubsection{\texorpdfstring{collect\+Primaries()}{collectPrimaries()}}
{\footnotesize\ttfamily static void collect\+Primaries (\begin{DoxyParamCaption}\item[{\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_map}{Geant4\+Primary\+Map} $\ast$}]{pm,  }\item[{\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction}{Geant4\+Primary\+Interaction} $\ast$}]{interaction,  }\item[{\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_vertex}{Geant4\+Vertex} $\ast$}]{particle\+\_\+origine,  }\item[{G4\+Primary\+Particle $\ast$}]{gp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Helper to recursively build a D\+D\+G4 interaction from an existing G4 interaction (primary vertex) 



Definition at line 86 of file Geant4\+Input\+Handling.\+cpp.



References D\+D4hep\+::\+Simulation\+::create\+Primary(), D\+D4hep\+::\+Simulation\+::\+G4\+P\+A\+R\+T\+I\+C\+L\+E\+\_\+\+H\+A\+S\+\_\+\+S\+E\+C\+O\+N\+D\+A\+R\+I\+ES, D\+D4hep\+::\+Simulation\+::\+G4\+P\+A\+R\+T\+I\+C\+L\+E\+\_\+\+P\+R\+I\+M\+A\+RY, D\+D4hep\+::\+Simulation\+::\+Geant4\+Vertex\+::in, D\+D4hep\+::\+Simulation\+::\+Geant4\+Primary\+Map\+::insert(), D\+D4hep\+::\+Simulation\+::\+Geant4\+Vertex\+::mask, D\+D4hep\+::\+Simulation\+::\+Geant4\+Primary\+Interaction\+::mask, D\+D4hep\+::\+Simulation\+::\+Geant4\+Vertex\+::out, D\+D4hep\+::\+Simulation\+::\+Geant4\+Primary\+Interaction\+::particles, D\+D4hep\+::\+Reference\+Bit\+Mask$<$ T $>$\+::set(), and D\+D4hep\+::\+Simulation\+::\+Geant4\+Primary\+Interaction\+::vertices.



Referenced by D\+D4hep\+::\+Simulation\+::create\+Primary().

\hypertarget{_geant4_input_handling_8cpp_a216fdc8fcc45739e42b9caee841af178}{}\label{_geant4_input_handling_8cpp_a216fdc8fcc45739e42b9caee841af178} 
\index{Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}!create\+G4\+Primary@{create\+G4\+Primary}}
\index{create\+G4\+Primary@{create\+G4\+Primary}!Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}}
\subsubsection{\texorpdfstring{create\+G4\+Primary()}{createG4Primary()}}
{\footnotesize\ttfamily static G4\+Primary\+Particle$\ast$ create\+G4\+Primary (\begin{DoxyParamCaption}\item[{const \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_particle_handle}{Geant4\+Particle\+Handle}}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 339 of file Geant4\+Input\+Handling.\+cpp.



References D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+Handle\+::charge(), D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+Handle\+::definition(), D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::mass, D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::pdg\+ID, D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::psx, D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::psy, and D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::psz.



Referenced by get\+Relevant().

\hypertarget{_geant4_input_handling_8cpp_a156d3c5a7b980bfd1699e4dd464201ef}{}\label{_geant4_input_handling_8cpp_a156d3c5a7b980bfd1699e4dd464201ef} 
\index{Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}!get\+Relevant@{get\+Relevant}}
\index{get\+Relevant@{get\+Relevant}!Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}}
\subsubsection{\texorpdfstring{get\+Relevant()}{getRelevant()}}
{\footnotesize\ttfamily static vector$<$ pair$<$\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_particle}{Geant4\+Particle}$\ast$,G4\+Primary\+Particle$\ast$$>$ $>$ get\+Relevant (\begin{DoxyParamCaption}\item[{set$<$ int $>$ \&}]{visited,  }\item[{map$<$ int, G4\+Primary\+Particle $\ast$$>$ \&}]{prim,  }\item[{\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction_a6787a2c42dc1fd371b274e75dc380e92}{Geant4\+Primary\+Interaction\+::\+Particle\+Map} \&}]{pm,  }\item[{const \hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_particle_handle}{Geant4\+Particle\+Handle}}]{p }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 354 of file Geant4\+Input\+Handling.\+cpp.



References create\+G4\+Primary(), D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::daughters, D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+Handle\+::energy(), D\+D4hep\+::\+Simulation\+::\+G4\+P\+A\+R\+T\+I\+C\+L\+E\+\_\+\+G\+E\+N\+\_\+\+S\+T\+A\+B\+LE, D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::id, D\+D4hep\+::\+Reference\+Bit\+Mask$<$ T $>$\+::is\+Set(), D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::mass, D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::status, and D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::time.



Referenced by D\+D4hep\+::\+Simulation\+::generate\+Primaries().

\hypertarget{_geant4_input_handling_8cpp_ad72275c53e6d7fd82f2679b3da0793ab}{}\label{_geant4_input_handling_8cpp_ad72275c53e6d7fd82f2679b3da0793ab} 
\index{Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}!rebase\+Particles@{rebase\+Particles}}
\index{rebase\+Particles@{rebase\+Particles}!Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}}
\subsubsection{\texorpdfstring{rebase\+Particles()}{rebaseParticles()}}
{\footnotesize\ttfamily static void rebase\+Particles (\begin{DoxyParamCaption}\item[{\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction_a6787a2c42dc1fd371b274e75dc380e92}{Geant4\+Primary\+Interaction\+::\+Particle\+Map} \&}]{particles,  }\item[{int \&}]{offset }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 189 of file Geant4\+Input\+Handling.\+cpp.



References D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+::id, and D\+D4hep\+::\+Simulation\+::\+Geant4\+Particle\+Handle\+::offset().



Referenced by D\+D4hep\+::\+Simulation\+::merge\+Interactions().

\hypertarget{_geant4_input_handling_8cpp_a24ec352dd579358abec2e3c008dbf773}{}\label{_geant4_input_handling_8cpp_a24ec352dd579358abec2e3c008dbf773} 
\index{Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}!rebase\+Vertices@{rebase\+Vertices}}
\index{rebase\+Vertices@{rebase\+Vertices}!Geant4\+Input\+Handling.\+cpp@{Geant4\+Input\+Handling.\+cpp}}
\subsubsection{\texorpdfstring{rebase\+Vertices()}{rebaseVertices()}}
{\footnotesize\ttfamily static void rebase\+Vertices (\begin{DoxyParamCaption}\item[{\hyperlink{class_d_d4hep_1_1_simulation_1_1_geant4_primary_interaction_a0016a8298291af16ea8f24a054cb864c}{Geant4\+Primary\+Interaction\+::\+Vertex\+Map} \&}]{vertices,  }\item[{int}]{part\+\_\+offset }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 201 of file Geant4\+Input\+Handling.\+cpp.



References D\+D4hep\+::\+Simulation\+::\+Geant4\+Vertex\+::in, D\+D4hep\+::\+Simulation\+::\+Geant4\+Vertex\+::out, and v.



Referenced by D\+D4hep\+::\+Simulation\+::merge\+Interactions().

